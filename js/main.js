var themeColorMeta,pageHeaderEl,navMusicEl,consoleEl,anzhiyu_musicFirst=!1,anzhiyu_keyboard=null,anzhiyu_musicPlaying=!1,$bodyWrap=document.getElementById("body-wrap"),anzhiyu_intype=!1,anzhiyu_keyUpEvent_timeoutId=null,anzhiyu_keyUpShiftDelayEvent_timeoutId=null,rm=null,popupWindowTimer=null,adjectives=["美丽的","英俊的","聪明的","勇敢的","可爱的","慷慨的","善良的","可靠的","开朗的","成熟的","稳重的","真诚的","幽默的","豁达的","有趣的","活泼的","优雅的","敏捷的","温柔的","温暖的","敬业的","细心的","耐心的","深沉的","朴素的","含蓄的","率直的","开放的","务实的","坚强的","自信的","谦虚的","文静的","深刻的","纯真的","朝气蓬勃的","慎重的","大方的","顽强的","迷人的","机智的","善解人意的","富有想象力的","有魅力的","独立的","好奇的","干净的","宽容的","尊重他人的","体贴的","守信的","有耐性的","有责任心的","有担当的","有远见的","有智慧的","有眼光的","有冒险精神的","有爱心的","有同情心的","喜欢思考的","喜欢学习的","具有批判性思维的","善于表达的","善于沟通的","善于合作的","善于领导的","有激情的","有幽默感的","有思想的","有个性的","有正义感的","有责任感的","有创造力的","有想象力的","有艺术细胞的","有团队精神的","有协调能力的","有决策能力的","有组织能力的","有学习能力的","有执行能力的","有分析能力的","有逻辑思维的","有创新能力的","有专业素养的","有商业头脑的"],vegetablesAndFruits=["萝卜","白菜","芹菜","生菜","青椒","辣椒","茄子","豆角","黄瓜","西红柿","洋葱","大蒜","土豆","南瓜","豆腐","韭菜","花菜","西兰花","蘑菇","金针菇","苹果","香蕉","橙子","柠檬","猕猴桃","草莓","葡萄","桃子","杏子","李子","石榴","西瓜","哈密瓜","蜜瓜","樱桃","蓝莓","柿子","橄榄","柚子","火龙果"],selectRandomSong=[],musicVolume=.8,changeMusicListFlag=!1,defaultPlayMusicList=[];document.addEventListener("DOMContentLoaded",function(){let o,i,a,e=!1;const n=e=>{const t=e=>Array.from(e).reduce((e,t)=>e+t.offsetWidth,0);if(e){const e=t(document.querySelector("#blog_name > a").children),n=t(document.getElementById("menus").children);o=e+n,i=document.getElementById("nav")}const n=window.innerWidth<=768||o>i.offsetWidth-120;i.classList.toggle("hide-menu",n)},s=()=>{anzhiyu.sidebarPaddingR(),anzhiyu.animateIn(document.getElementById("menu-mask"),"to_show 0.5s"),document.getElementById("sidebar-menus").classList.add("open"),e=!0},t=()=>{document.body.style.paddingRight="",anzhiyu.animateOut(document.getElementById("menu-mask"),"to_hide 0.5s"),document.getElementById("sidebar-menus").classList.remove("open"),e=!1},c=function(){const e=GLOBAL_CONFIG.highlight;if(!e)return;const{highlightCopy:t,highlightLang:n,highlightHeightLimit:i,plugin:o}=e,a=GLOBAL_CONFIG_SITE.isHighlightShrink,s=t||n||void 0!==a,c="highlight.js"===o?document.querySelectorAll("figure.highlight"):document.querySelectorAll('pre[class*="language-"]');if(!s&&!i||!c.length)return;const l="prismjs"===o,r=!0===a?"closed":"",d=void 0!==a?'<i class="anzhiyufont anzhiyu-icon-angle-down expand ${highlightShrinkClass}"></i>':"",u=t?'<div class="copy-notice"></div><i class="anzhiyufont anzhiyu-icon-paste copy-button"></i>':"",m=(t,n)=>{if(void 0!==GLOBAL_CONFIG.Snackbar)anzhiyu.snackbarShow(n);else{const e=t.previousElementSibling;e.textContent=n,e.style.opacity=1,setTimeout(()=>{e.style.opacity=0},800)}},y=e=>{const t=e.parentNode;t.classList.add("copy-true");const n=window.getSelection(),o=document.createRange(),i=l?"pre code":"table .code pre";var a;o.selectNodeContents(t.querySelectorAll(`${i}`)[0]),n.removeAllRanges(),n.addRange(o),a=e.lastChild,document.queryCommandSupported&&document.queryCommandSupported("copy")?(document.execCommand("copy"),m(a,GLOBAL_CONFIG.copy.success)):m(a,GLOBAL_CONFIG.copy.noSupport),n.removeAllRanges(),t.classList.remove("copy-true")},h=function(e){const t=e.target.classList;t.contains("expand")?this.classList.toggle("closed"):t.contains("copy-button")&&y(this)},g=function(){this.classList.toggle("expand-done")},p=(e,t,n)=>{const o=document.createDocumentFragment();if(s){const t=document.createElement("div");t.className=`highlight-tools ${r}`,t.innerHTML=d+e+u,anzhiyu.addEventListenerPjax(t,"click",h),o.appendChild(t)}if(i&&t.offsetHeight>i+30){const e=document.createElement("div");e.className="code-expand-btn",e.innerHTML='<i class="anzhiyufont anzhiyu-icon-angle-double-down"></i>',anzhiyu.addEventListenerPjax(e,"click",g),o.appendChild(e)}"hl"===n?t.insertBefore(o,t.firstChild):t.parentNode.insertBefore(o,t)};l?c.forEach(t=>{if(n){const e=`<div class="code-lang">${t.getAttribute("data-language")||"Code"}</div>`;anzhiyu.wrap(t,"figure",{class:"highlight"}),p(e,t)}else anzhiyu.wrap(t,"figure",{class:"highlight"}),p("",t)}):c.forEach(t=>{if(n){let e=t.getAttribute("class").split(" ")[1];"plain"!==e&&void 0!==e||(e="Code");p(`<div class="code-lang">${e}</div>`,t,"hl")}else p("",t,"hl")})};const l=function(e){const a=e=>{let a="";const s=e=>e.replace(/"/g,"&quot;");return e.forEach(e=>{const t=e.alt?`alt="${s(e.alt)}"`:"",n=e.title?`title="${s(e.title)}"`:"",o=e.address?e.address:"",i=`\n        <div class="fj-gallery-item">\n          ${o?`<div class="tag-address">${o}</div>`:""}\n          <img src="${e.url}" ${t+n}>\n        </div>\n      `;a+=i}),a},s=(e,t,n)=>{const o=Number(n),i=t.length;return i>o?e.insertAdjacentHTML("beforeend",a(t.splice(0,o))):(e.insertAdjacentHTML("beforeend",a(t)),e.classList.remove("lazyload")),window.lazyLoadInstance&&window.lazyLoadInstance.update(),i>o?o:i},n=(n,o)=>{const i=n.getAttribute("data-limit")??o.length;if(!n.classList.contains("lazyload")||o.length<i)n.innerHTML=a(o),n.nextElementSibling.style.display="none";else if(!n.classList.contains("btn_album_detail_lazyload")||n.classList.contains("page_img_lazyload")){s(n,o,i);const a=()=>{const e=s(n,o,i);fjGallery(n,"appendImages",n.querySelectorAll(`.fj-gallery-item:nth-last-child(-n+${e})`)),anzhiyu.loadLightbox(n.querySelectorAll("img")),e<Number(i)&&t.unobserve(n.nextElementSibling)},t=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&setTimeout(a(),100)})});t.observe(n.nextElementSibling)}else{s(n,o,i);const a=()=>{const e=s(n,o,i);fjGallery(n,"appendImages",n.querySelectorAll(`.fj-gallery-item:nth-last-child(-n+${e})`)),anzhiyu.loadLightbox(n.querySelectorAll("img")),e<i&&n.nextElementSibling.removeEventListener("click",a)};n.nextElementSibling.addEventListener("click",a)}anzhiyu.initJustifiedGallery(n),anzhiyu.loadLightbox(n.querySelectorAll("img")),window.lazyLoadInstance&&window.lazyLoadInstance.update()},t=()=>{e.forEach(t=>{t.classList.contains("url")?(async e=>{const t=await fetch(e);return await t.json()})(t.textContent).then(e=>{n(t,e)}):n(t,JSON.parse(t.textContent))})};window.fjGallery?t():(getCSS(`${GLOBAL_CONFIG.source.justifiedGallery.css}`),getScript(`${GLOBAL_CONFIG.source.justifiedGallery.js}`).then(t))},r=function(){const o=document.getElementById("rightside"),i=window.innerHeight+56;let a=0;document.body.scrollHeight<=i&&(o.style.cssText="opacity: 1; transform: translateX(-58px)");let s=0,c=!0;const l=document.getElementById("page-header"),r=document.getElementById("popup-window"),d="function"==typeof chatBtnHide,u="function"==typeof chatBtnShow;let m=!1;const e=document.getElementById("nav-music"),t=document.getElementById("footer"),y=document.getElementById("waterfall"),h=document.getElementById("percent"),g=document.getElementById("nav-totop"),p=document.getElementById("body-wrap");let L=document.getElementById("post-comment")||document.getElementById("footer");const n=anzhiyu.throttle(()=>{const e=window.scrollY||document.documentElement.scrollTop,t=function(e){const t=e>s;return s=e,t}(e),n=Math.abs(a-e);e>60&&n<20&&0!=n||(r&&r.classList.contains("show-popup-window")&&e>60&&n>20&&0!=a&&anzhiyu.throttle(()=>{popupWindowTimer&&clearTimeout(popupWindowTimer),popupWindowTimer=setTimeout(()=>{r.classList.contains("popup-hide")||r.classList.add("popup-hide"),setTimeout(()=>{r.classList.remove("popup-hide"),r.classList.remove("show-popup-window")},1e3)},1e3)},1e3)(),a=e,e>26?(t?(l.classList.contains("nav-visible")&&l.classList.remove("nav-visible"),u&&!0===c&&(chatBtnHide(),c=!1)):(l.classList.contains("nav-visible")||l.classList.add("nav-visible"),d&&!1===c&&(chatBtnShow(),c=!0)),requestAnimationFrame(()=>{anzhiyu.initThemeColor(),l.classList.add("nav-fixed")}),"0"===window.getComputedStyle(o).getPropertyValue("opacity")&&(o.style.cssText="opacity: 0.8; transform: translateX(-58px)")):(e<=5&&requestAnimationFrame(()=>{l.classList.remove("nav-fixed"),l.classList.remove("nav-visible"),anzhiyu.initThemeColor()}),o.style.cssText="opacity: ''; transform: ''"),document.body.scrollHeight<=i&&(o.style.cssText="opacity: 0.8; transform: translateX(-58px)"),function(e){let t=p.clientHeight;const n=document.documentElement.clientHeight,o=e/(t>n?t-n:document.documentElement.scrollHeight-n),i=Math.round(100*o),a=i>100?100:i<=0?1:i;if(h.textContent=a,function(e){if(!e)return;if("none"==window.getComputedStyle(e).getPropertyValue("display"))return;const t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;return e.offsetTop-document.documentElement.scrollTop<=t}(L||a>90)&&e>20?(g.classList.add("long"),h.textContent="返回顶部"):(g.classList.remove("long"),h.textContent=a),y){const t=e%document.documentElement.clientHeight;!m&&t+100>=document.documentElement.clientHeight?(console.info(t,document.documentElement.clientHeight),setTimeout(()=>{waterfall("#waterfall")},500)):setTimeout(()=>{y&&waterfall("#waterfall")},500)}}(e))},96);t&&anzhiyu.intersectionObserver(()=>{t&&e&&768<document.body.clientWidth&&(e.style.bottom="-10px",e.style.opacity="0"),m=!0},()=>{t&&e&&768<document.body.clientWidth&&(e.style.bottom="20px",e.style.opacity="1")})().observe(t),n(),anzhiyu.addEventListenerPjax(window,"scroll",n,{passive:!0})},d=function(){const a=GLOBAL_CONFIG_SITE.isToc,e=GLOBAL_CONFIG.isAnchor,t=document.getElementById("article-container");if(!t||!a&&!e)return;let s,c,l,r;if(a){const a=document.getElementById("card-toc");c=a.querySelector(".toc-content"),s=c.querySelectorAll(".toc-link"),r=c.classList.contains("is-expand");const e=e=>{const t=e.target.closest(".toc-link");t&&(e.preventDefault(),anzhiyu.scrollToDest(anzhiyu.getEleTop(document.getElementById(decodeURI(t.getAttribute("href")).replace("#","")))-60,300),window.innerWidth<900&&a.classList.remove("open"))};anzhiyu.addEventListenerPjax(c,"click",e),l=e=>{const t=e.getBoundingClientRect().top,n=c.scrollTop;t>document.documentElement.clientHeight-100&&(c.scrollTop=n+150),t<100&&(c.scrollTop=n-150)}}const n=t.querySelectorAll("h1,h2,h3,h4,h5,h6"),d=Array.from(n).filter(e=>"CrawlerTitle"!==e.id);let u="";const o=anzhiyu.throttle(()=>{!function(n){if(0===n)return!1;let o="",i="";if(d.forEach(function(e,t){if(n>anzhiyu.getEleTop(e)-80){const n=e.id;o=n?"#"+encodeURI(n):"",i=t}}),u!==i&&(e&&anzhiyu.updateAnchor(o),u=i,a)){if(c.querySelectorAll(".active").forEach(e=>{e.classList.remove("active")}),""===o)return;const a=s[i];if(a.classList.add("active"),setTimeout(()=>{l(a)},0),r)return;let e=a.parentNode;for(;!e.matches(".toc");e=e.parentNode)e.matches("li")&&e.classList.add("active")}}(window.scrollY||document.documentElement.scrollTop)},100);anzhiyu.addEventListenerPjax(window,"scroll",o,{passive:!0})},u=t=>{const n=(window.globalFn||{}).themeChange||{};if(!n)return;Object.keys(n).forEach(e=>{(0,n[e])(t)}),rm&&rm.hideRightMenu();const e=a.querySelector(".menu-darkmode-text");if(e.textContent="light"===t?"深色模式":"浅色模式",!GLOBAL_CONFIG_SITE.isPost){document.querySelector(":root").style.setProperty("--anzhiyu-bar-background","var(--anzhiyu-meta-theme-color)"),requestAnimationFrame(()=>{anzhiyu.initThemeColor()}),document.documentElement.style.setProperty("--anzhiyu-main",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-theme")),document.documentElement.style.setProperty("--anzhiyu-theme-op",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"23"),document.documentElement.style.setProperty("--anzhiyu-theme-op-deep",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"dd")}},m={readmode:()=>{const e=document.body;e.classList.add("read-mode");const t=document.createElement("button");t.type="button",t.className="anzhiyufont anzhiyu-icon-xmark exit-readmode",e.appendChild(t);const n=()=>{e.classList.remove("read-mode"),t.remove(),t.removeEventListener("click",n)};t.addEventListener("click",n)},darkmode:()=>{const e="dark"===document.documentElement.getAttribute("data-theme")?"light":"dark";"dark"===e?(activateDarkMode(),void 0!==GLOBAL_CONFIG.Snackbar&&anzhiyu.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night)):(activateLightMode(),void 0!==GLOBAL_CONFIG.Snackbar&&anzhiyu.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day)),saveToLocal.set("theme",e,2),u(e)},"rightside-config":e=>{const t=e.firstElementChild;t.classList.contains("show")&&(t.classList.add("status"),setTimeout(()=>{t.classList.remove("status")},300)),t.classList.toggle("show")},"go-up":()=>{anzhiyu.scrollToDest(0,500)},"hide-aside-btn":()=>{const e=document.documentElement.classList,t=e.contains("hide-aside")?"show":"hide";saveToLocal.set("aside-status",t,2),e.toggle("hide-aside")},"mobile-toc-button":e=>{const t=document.getElementById("card-toc");t.style.transformOrigin=`right ${e.getBoundingClientRect().top+17}px`,t.style.transition="transform 0.3s ease-in-out",t.classList.toggle("open"),t.addEventListener("transitionend",()=>{t.style.transition="",t.style.transformOrigin=""},{once:!0})},"chat-btn":()=>{window.chatBtnFn()},translateLink:()=>{window.translateFn.translatePage()}};document.getElementById("rightside").addEventListener("click",function(e){const t=e.target.closest("[id]");t&&m[t.id]&&m[t.id](this)}),document.addEventListener("touchstart",e=>{anzhiyu.removeRewardMask()},{passive:!0});const y=()=>{const e=document.querySelectorAll("#article-container .hide-button");if(!e.length)return;const t=function(e){this.classList.add("open");const t=this.nextElementSibling.querySelectorAll(".gallery-container");t.length&&addJustifiedGallery(t)};e.forEach(e=>{e.addEventListener("click",t,{once:!0})})},h=()=>{const e=document.querySelectorAll("#article-container .tabs");if(!e.length)return;const a=(e,t)=>{Array.from(e).forEach(e=>{e.classList.remove("active"),e!==t&&e.id!==t||e.classList.add("active")})},n=(e,i)=>{anzhiyu.addEventListenerPjax(e.firstElementChild,"click",function(e){const t=e.target.closest("button");if(t.classList.contains("active"))return;a(this.children,t),this.classList.remove("no-default");const n=t.getAttribute("data-href"),o=this.nextElementSibling;if(a(o.children,n),i){const e=o.querySelectorAll(`#${n} .fj-gallery`);e.length>0&&anzhiyu.initJustifiedGallery(e)}})};e.forEach(e=>{const t=!!e.querySelectorAll(".gallery-container");n(e,t),(t=>{anzhiyu.addEventListenerPjax(t.lastElementChild,"click",e=>{e.target.closest("button")&&anzhiyu.scrollToDest(anzhiyu.getEleTop(t),300)})})(e)})},g=function(e){e.forEach(e=>{const t=e.getAttribute("datetime");e.textContent=anzhiyu.diffDate(t,!0),e.style.display="inline"})},p=e=>{if(/^(rgb|RGB)/.test(e)){return e.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(",").reduce((e,t)=>e+Number(t).toString(16).padStart(2,"0"),"#")}return/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(e)&&4===e.length?Array.from(e.slice(1)).reduce((e,t)=>e+t+t,"#"):e},L=(e,t)=>{const n=e.startsWith("#");n&&(e=e.slice(1));let o=parseInt(e,16);const i=(e,t)=>(e+=t)>255?255:e<0?0:e,a=i(o>>16,t),s=i(o>>8&255,t),c=i(255&o,t);return(n?"#":"")+String("000000"+(c|s<<8|a<<16).toString(16)).slice(-6)},f=e=>{const t=(e=>{e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(e,t,n,o)=>t+t+n+n+o+o);const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?`rgb(${parseInt(t[1],16)}, ${parseInt(t[2],16)}, ${parseInt(t[3],16)})`:null})(e).match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),[n,o,i,a]=t;return(299*o+587*i+114*a)/255e3>=.5?"light":"dark"};function E(e,t){const n=document.getElementById(e);if(n&&t){const e=n.querySelector(t);e&&e.addEventListener("click",m.darkmode)}else n&&n.addEventListener("click",m.darkmode)}window.onkeydown=function(e){123===e.keyCode&&anzhiyu.snackbarShow("开发者模式已打开，请遵循GPL协议",!1)};window.refreshFn=function(){n(!0),i.classList.add("show"),themeColorMeta=document.querySelector('meta[name="theme-color"]'),pageHeaderEl=document.getElementById("page-header"),navMusicEl=document.getElementById("nav-music"),consoleEl=document.getElementById("console"),E("console",".darkmode_switchbutton"),GLOBAL_CONFIG_SITE.isPost?(void 0!==GLOBAL_CONFIG.noticeOutdate&&function(){const n=GLOBAL_CONFIG.noticeOutdate,o=anzhiyu.diffDate(GLOBAL_CONFIG_SITE.postUpdate);if(o>=n.limitDay){const e=document.createElement("div");e.className="post-outdate-notice",e.textContent=n.messagePrev+" "+o+" "+n.messageNext;const t=document.getElementById("article-container");"top"===n.position?t.insertBefore(e,t.firstChild):t.appendChild(e)}}(),GLOBAL_CONFIG.relativeDate.post&&g(document.querySelectorAll("#post-meta time"))):((GLOBAL_CONFIG.relativeDate.homepage||GLOBAL_CONFIG.relativeDate.simplehomepage)&&g(document.querySelectorAll("#recent-posts time")),GLOBAL_CONFIG.runtime&&(()=>{const t=document.getElementById("runtimeshow");if(t){const e=t.getAttribute("data-publishDate");t.textContent=`${anzhiyu.diffDate(e)} ${GLOBAL_CONFIG.runtime}`}})(),(()=>{const t=document.getElementById("last-push-date");if(t){const e=t.getAttribute("data-lastPushDate");t.textContent=anzhiyu.diffDate(e,!0)}})(),(()=>{const e=document.querySelector("#aside-cat-list.expandBtn");if(!e)return;anzhiyu.addEventListenerPjax(e,"click",e=>{const t=e.target;"I"===t.nodeName&&(e.preventDefault(),t.parentNode.classList.toggle("expand"))},!0)})()),GLOBAL_CONFIG.diytitle&&function(){let e,t=GLOBAL_CONFIG.diytitle.leaveTitle,n=GLOBAL_CONFIG.diytitle.backTitle,o=document.title;document.addEventListener("visibilitychange",function(){document.hidden?(document.title=t,clearTimeout(e)):(document.title=n+o,e=setTimeout(function(){document.title=o},2e3))})}(),d(),GLOBAL_CONFIG_SITE.isHome&&(()=>{const e=document.getElementById("scroll-down");e&&anzhiyu.addEventListenerPjax(e,"click",()=>{const e=document.getElementById("bbTimeList");e?anzhiyu.scrollToDest(e.offsetTop-62,300):anzhiyu.scrollToDest(document.getElementById("home_top").offsetTop-60,300)})})(),c(),GLOBAL_CONFIG.isPhotoFigcaption&&document.querySelectorAll("#article-container img").forEach(function(t){const n=t.parentNode,o=t.title||t.alt;if(o&&!n.parentNode.classList.contains("justified-gallery")){const e=document.createElement("div");e.className="img-alt is-center",e.textContent=o,n.insertBefore(e,t.nextSibling)}}),r(),window.scrollCollect&&window.scrollCollect();const e=document.querySelectorAll("#content-inner .fj-gallery");var t;e.length&&l(e),anzhiyu.loadLightbox(document.querySelectorAll("#article-container img:not(.no-lightbox)")),(()=>{const e=document.querySelectorAll("#article-container table");e.length&&e.forEach(e=>{e.closest(".highlight")||anzhiyu.wrap(e,"div",{class:"table-wrap"})})})(),y(),h(),(()=>{const e=document.getElementById("switch-btn");if(!e)return;let t=!1;const n=document.getElementById("post-comment");anzhiyu.addEventListenerPjax(e,"click",()=>{n.classList.toggle("move"),t||"function"!=typeof loadOtherComment||(t=!0,loadOtherComment())})})(),document.getElementById("toggle-menu").addEventListener("click",()=>{s()}),document.getElementById("post-comment")&&function(){let t=1,n="",a=document.createElement("div");a.id="owo-big";let s=document.querySelector("body");function i(i){"IMG"==i.target.tagName&&t&&(t=0,n=setTimeout(()=>{let e=3*i.target.clientHeight,t=3*i.target.clientWidth,n=i.x-i.offsetX-(t-i.target.clientWidth)/2;n+t>s.clientWidth&&(n-=n+t-s.clientWidth+10),n<0&&(n=10);let o=i.y-i.offsetY;a.style.height=e+"px",a.style.width=t+"px",a.style.left=n+"px",a.style.top=o+"px",a.style.display="flex",a.innerHTML=`<img src="${i.target.src}">`},100))}function c(e){a.style.display="none",t=1,clearTimeout(n)}s.appendChild(a),new MutationObserver(e=>{e.forEach(n=>{const o=n.addedNodes;for(let t=0;t<o.length;t++){const e=o[t];if(e.nodeType===Node.ELEMENT_NODE&&e.classList.contains("OwO-body")&&!e.classList.contains("comment-barrage")){const n=e;n.addEventListener("contextmenu",e=>e.preventDefault()),n.addEventListener("mouseover",i),n.addEventListener("mouseout",c)}}})}).observe(document.getElementById("post-comment"),{childList:!0,subtree:!0})}(),function(){const e=document.querySelector(".topGroup");e&&e.addEventListener("mouseleave",function(){document.getElementById("todayCard").classList.remove("hide"),document.getElementById("todayCard").style.zIndex=1})}(),(async()=>{const o=document.querySelector(":root"),i=document.getElementById("post-top-bg")?.src;if(!i)return o.style.setProperty("--anzhiyu-bar-background","var(--anzhiyu-meta-theme-color)"),requestAnimationFrame(()=>{anzhiyu.initThemeColor()}),document.documentElement.style.setProperty("--anzhiyu-main",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-theme")),document.documentElement.style.setProperty("--anzhiyu-theme-op",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"23"),void document.documentElement.style.setProperty("--anzhiyu-theme-op-deep",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"dd");if(GLOBAL_CONFIG.mainTone)if(GLOBAL_CONFIG_SITE.postMainColor){let e=GLOBAL_CONFIG_SITE.postMainColor;"light"===f(e)&&(e=L(p(e),-40)),o.style.setProperty("--anzhiyu-bar-background",e),requestAnimationFrame(()=>{anzhiyu.initThemeColor()}),GLOBAL_CONFIG.mainTone.cover_change&&(document.documentElement.style.setProperty("--anzhiyu-main",e),document.documentElement.style.setProperty("--anzhiyu-theme-op",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"23"),document.documentElement.style.setProperty("--anzhiyu-theme-op-deep",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"dd"))}else{const e="var(--anzhiyu-theme)";let n="";"cdn"==GLOBAL_CONFIG.mainTone.mode||"both"==GLOBAL_CONFIG.mainTone.mode?n=i+"?imageAve":"api"==GLOBAL_CONFIG.mainTone.mode&&(n=GLOBAL_CONFIG.mainTone.api+i);try{const t=await fetch(n);if(t.ok&&t.headers.get("content-type")?.includes("application/json")){const i=await t.json();let e="cdn"==GLOBAL_CONFIG.mainTone.mode||"both"==GLOBAL_CONFIG.mainTone.mode?"#"+i.RGB.slice(2):i.RGB;"light"===f(e)&&(e=L(p(e),-40)),o.style.setProperty("--anzhiyu-bar-background",e),requestAnimationFrame(()=>{anzhiyu.initThemeColor()}),GLOBAL_CONFIG.mainTone.cover_change&&(document.documentElement.style.setProperty("--anzhiyu-main",e),document.documentElement.style.setProperty("--anzhiyu-theme-op",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"23"),document.documentElement.style.setProperty("--anzhiyu-theme-op-deep",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"dd"))}else if("both"==GLOBAL_CONFIG.mainTone.mode)try{const t=await fetch(GLOBAL_CONFIG.mainTone.api+i);if(t.ok&&t.headers.get("content-type")?.includes("application/json")){let e=(await t.json()).RGB;"light"===f(e)&&(e=L(p(e),-40)),o.style.setProperty("--anzhiyu-bar-background",e),requestAnimationFrame(()=>{anzhiyu.initThemeColor()}),GLOBAL_CONFIG.mainTone.cover_change&&(document.documentElement.style.setProperty("--anzhiyu-main",e),document.documentElement.style.setProperty("--anzhiyu-theme-op",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"23"),document.documentElement.style.setProperty("--anzhiyu-theme-op-deep",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"dd"))}else o.style.setProperty("--anzhiyu-bar-background",e),requestAnimationFrame(()=>{anzhiyu.initThemeColor()}),document.documentElement.style.setProperty("--anzhiyu-main",e)}catch{o.style.setProperty("--anzhiyu-bar-background",e),requestAnimationFrame(()=>{anzhiyu.initThemeColor()}),document.documentElement.style.setProperty("--anzhiyu-main",e)}else o.style.setProperty("--anzhiyu-bar-background",e),requestAnimationFrame(()=>{anzhiyu.initThemeColor()}),document.documentElement.style.setProperty("--anzhiyu-main",e)}catch(i){console.error("Error fetching data:",i),o.style.setProperty("--anzhiyu-bar-background",e),requestAnimationFrame(()=>{anzhiyu.initThemeColor()}),document.documentElement.style.setProperty("--anzhiyu-main",e)}}})(),(t=document.getElementById("toPageText"))&&t.addEventListener("keydown",e=>{if(13===e.keyCode){anzhiyu.toPage();var t=document.getElementById("toPageButton").href;pjax.loadUrl(t)}}),anzhiyu.addEventListenerPjax(document.getElementById("toggle-menu"),"click",()=>{s()}),document.getElementById("page-name").innerText=document.title.split(` | ${GLOBAL_CONFIG_SITE.configTitle}`)[0],anzhiyu.initIndexEssay(),anzhiyu.changeTimeInEssay(),anzhiyu.removeBodyPaceClass(),anzhiyu.qrcodeCreate(),anzhiyu.changeTimeInAlbumDetail(),anzhiyu.reflashEssayWaterFall(),anzhiyu.sayhi(),anzhiyu.stopImgRightDrag(),anzhiyu.addNavBackgroundInit(),anzhiyu.setValueToBodyType(),anzhiyu.catalogActive(),anzhiyu.tagsPageActive(),anzhiyu.categoriesBarActive(),anzhiyu.topCategoriesBarScroll(),anzhiyu.switchRightClickMenuHotReview(),anzhiyu.getCustomPlayList(),anzhiyu.addEventListenerConsoleMusicList(!1),anzhiyu.initPaginationObserver(),setTimeout(()=>{!function(){const e=document.querySelectorAll("input, textarea");Array.from(e).filter(e=>{"center-console"===e.id&&e.id}).forEach(e=>{e.addEventListener("focus",()=>{anzhiyu_intype=!0}),e.addEventListener("blur",()=>{anzhiyu_intype=!1})})}(),"function"==typeof addFriendLinksInFooter&&addFriendLinksInFooter()},200)},refreshFn(),window.addEventListener("resize",()=>{n(!1),e&&anzhiyu.isHidden(document.getElementById("toggle-menu"))&&t()}),document.getElementById("menu-mask").addEventListener("click",e=>{t()}),a=document.getElementById("rightMenu"),E("menu-darkmode"),E("sidebar",".darkmode_switchbutton"),document.querySelector("#sidebar-menus .menus_items")&&document.querySelector("#sidebar-menus .menus_items").addEventListener("click",e=>{const t=e.target.closest(".site-page.group");t&&t.classList.toggle("hide")}),GLOBAL_CONFIG.islazyload&&(window.lazyLoadInstance=new LazyLoad({elements_selector:"img",threshold:0,data_src:"lazy-src"})),void 0!==GLOBAL_CONFIG.copyright&&(()=>{const{limitCount:n,languages:o,copy:i,copyrightEbable:e}=GLOBAL_CONFIG.copyright;document.body.addEventListener("copy",t=>{if(i&&anzhiyu.snackbarShow(o.copySuccess),e){t.preventDefault();const i=window.getSelection(0).toString();let e=i;return i.length>n&&(e=`${i}\n\n\n${o.author}\n${o.link}${window.location.href}\n${o.source}\n${o.info}`),t.clipboardData?t.clipboardData.setData("text",e):window.clipboardData.setData("text",e)}})})(),GLOBAL_CONFIG.navMusic&&function(){const n=setInterval(()=>{if(navMusicEl&&navMusicEl.querySelector("#nav-music meting-js").aplayer){clearInterval(n);let e='<i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span>',t='<i class="anzhiyufont anzhiyu-icon-pause"></i><span>暂停音乐</span>';navMusicEl.querySelector("#nav-music meting-js").aplayer.on("pause",function(){navMusicEl.classList.remove("playing"),document.getElementById("menu-music-toggle").innerHTML=e,document.getElementById("nav-music-hoverTips").innerHTML="音乐已暂停",document.querySelector("#consoleMusic").classList.remove("on"),anzhiyu_musicPlaying=!1,navMusicEl.classList.remove("stretch")}),navMusicEl.querySelector("#nav-music meting-js").aplayer.on("play",function(){navMusicEl.classList.add("playing"),document.getElementById("menu-music-toggle").innerHTML=t,document.querySelector("#consoleMusic").classList.add("on"),anzhiyu_musicPlaying=!0})}},16)}(),GLOBAL_CONFIG.shortcutKey&&document.getElementById("consoleKeyboard")&&(localStorage.setItem("keyboardToggle","true"),document.getElementById("consoleKeyboard").classList.add("on"),anzhiyu_keyboard=!0,function(){function t(e){const t=27===e.keyCode,n=e.shiftKey,o=anzhiyu_keyboard,i=anzhiyu_intype;t&&(anzhiyu.hideLoading(),anzhiyu.hideConsole(),rm&&rm.hideRightMenu());const a=GLOBAL_CONFIG.shortcutKey.delay?GLOBAL_CONFIG.shortcutKey.delay:100,s=GLOBAL_CONFIG.shortcutKey.shiftDelay?GLOBAL_CONFIG.shortcutKey.shiftDelay:200;o&&n&&!i&&(anzhiyu_keyUpShiftDelayEvent_timeoutId=setTimeout(()=>{switch(e.keyCode){case 16:anzhiyu_keyUpEvent_timeoutId=setTimeout(()=>{document.querySelector("#keyboard-tips").classList.add("show")},s);break;case 65:anzhiyu.switchConsole();break;case 77:anzhiyu.musicToggle();break;case 75:anzhiyu.keyboardToggle();break;case 73:anzhiyu.rightMenuToggle();break;case 82:toRandomPost();break;case 72:pjax.loadUrl("/");break;case 68:m.darkmode();break;case 70:pjax.loadUrl("/fcircle/");break;case 76:pjax.loadUrl("/link/");break;case 80:pjax.loadUrl("/about/")}e.preventDefault()},a))}function n(e){anzhiyu_keyUpEvent_timeoutId&&clearTimeout(anzhiyu_keyUpEvent_timeoutId),anzhiyu_keyUpShiftDelayEvent_timeoutId&&clearTimeout(anzhiyu_keyUpShiftDelayEvent_timeoutId),16===e.keyCode&&document.querySelector("#keyboard-tips").classList.remove("show")}anzhiyu_keyboard=!!localStorage.getItem("keyboardToggle")&&localStorage.getItem("keyboardToggle"),window.onfocus=function(){document.getElementById("keyboard-tips").classList.remove("show")},function(){const e=window;e.removeEventListener("keydown",t),e.removeEventListener("keyup",n),e.addEventListener("keydown",t),e.addEventListener("keyup",n)}()}()),GLOBAL_CONFIG.autoDarkmode&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{void 0===saveToLocal.get("theme")&&(e.matches?u("dark"):u("light"))}),GLOBAL_CONFIG.greetingBox&&function(){const t=GLOBAL_CONFIG.greetingBox.list,e=GLOBAL_CONFIG.greetingBox.default;let n=document.createElement("div");n.id="greeting",setTimeout(()=>{n.classList.add("shown")},1e3);let o=document.getElementById("greetingBox");if(!o)return;o.appendChild(n);const i=(new Date).getHours();let a=e;for(let e=0;e<t.length;e++)if(i>=t[e].startTime&&i<=t[e].endTime){a=t[e].greeting;break}n.innerHTML=a,setTimeout(()=>{n.classList.remove("shown"),setTimeout(()=>{o.remove()},500)},3e3)}(),GLOBAL_CONFIG.LA51&&function(){const i=(o,i="UTF-8",a,s)=>new Promise((t,e)=>{const n=document.createElement("script");n.src=o,n.async=!0,s&&n.setAttribute("id",s),i&&n.setAttribute("charset",i),a&&n.setAttribute("crossorigin",a),n.onerror=e,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)});Promise.all([{url:"https://sdk.51.la/js-sdk-pro.min.js",charset:"UTF-8",crossorigin:!1,id:"LA_COLLECT"},{url:"https://sdk.51.la/perf/js-sdk-perf.min.js",crossorigin:"anonymous"}].map(({url:e,charset:t,crossorigin:n,id:o})=>i(e,t,n,o))).then(()=>{LA.init({id:GLOBAL_CONFIG.LA51.ck,ck:GLOBAL_CONFIG.LA51.ck}),(new LingQue.Monitor).init({id:GLOBAL_CONFIG.LA51.LingQueMonitorID,sendSuspicious:!0})}).catch(e=>{console.error("加载51a统计异常，本地加载403是正常情况:",e)})}()});